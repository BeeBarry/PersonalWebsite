---
title: 'Introduktion till Docker'
description: 'LÃ¤r dig grunderna i Docker och containers'
category: 'docker'
image:
    url: '/docker-intro.svg'
    alt: 'Docker Introduction'
order: 1
date: '2025-02-03'
tags: ['Beginner', 'Overview']
---

## Containers: LÃ¥dan som hÃ¥ller det viktiga

En **container** Ã¤r som en liten lÃ¥da som innehÃ¥ller allt din applikation behÃ¶ver fÃ¶r att fungera: programkod, bibliotek och konfigurationer. **Grundtanken med containers Ã¤r att sÃ¤kerstÃ¤lla att applikationen fungerar pÃ¥ exakt samma sÃ¤tt oavsett var den kÃ¶rs**â€”pÃ¥ din laptop, en kollegas dator eller i molnet.

NÃ¤r Lisa, en ny utvecklare, bÃ¶rjar i teamet fÃ¶rvÃ¤ntar hon sig att det kommer ta **flera timmar, kanske en hel dag**, att installera alla verktyg och konfigurera sin utvecklingsmiljÃ¶. Men hennes team har en bÃ¤ttre lÃ¶sning.

*"Det finns ett smidigare sÃ¤tt,"* sÃ¤ger en kollega och visar hur teamet anvÃ¤nder containers.

**Eftersom allt Ã¤r paketerat i en container**, behÃ¶ver Lisa bara kÃ¶ra ett enda kommando fÃ¶r att fÃ¥ exakt samma utvecklingsmiljÃ¶ som sina teammedlemmar.

ğŸ”¹ **Vad lÃ¶ser containers?**

- **Alla utvecklare i teamet arbetar i en identisk miljÃ¶,** vilket minskar "det fungerar pÃ¥ min dator"-problem.
- Nya utvecklare kan starta upp sin miljÃ¶ **pÃ¥ nÃ¥gra minuter istÃ¤llet fÃ¶r timmar.**
- Alla anvÃ¤nder **exakt samma versioner** av Python, Node, databaser och andra beroenden.
- **Lisas utvecklingsmiljÃ¶ pÃ¥verkar inte andra projekt pÃ¥ hennes dator** â€“ hon kan arbeta med flera projekt utan att behÃ¶va installera om eller Ã¤ndra instÃ¤llningar varje gÃ¥ng.

Med containers slipper vi den klassiska frustrationen: *"**Men det funkar ju inte pÃ¥ min dator!**"*.

<ZoomableImage
    src="/intro-to-docker-pic1.svg"
    alt="Docker Container"
    caption="En container Ã¤r en lÃ¥da som hÃ¥ller koll pÃ¥ innehÃ¥llet"
/>

## Container Images: Ritningen fÃ¶r containers

Om containers Ã¤r lÃ¥dorna, sÃ¥ Ã¤r **container images** ritningen Ã¶ver vad som ska finnas i lÃ¥dan. En image specificerar alla filer, instÃ¤llningar och program som ska ingÃ¥ nÃ¤r containern startas.

Med container images kan teamet hantera olika versioner av sin applikation:

**En stabil version fÃ¶r produktion** â€“ sÃ¤kerstÃ¤ller att kunderna alltid anvÃ¤nder en testad och fungerande version.

**En testversion fÃ¶r kvalitetssÃ¤kring** â€“ teamet kan kÃ¶ra tester och upptÃ¤cka buggar innan koden nÃ¥r produktionen.

**En utvecklingsversion med de senaste funktionerna** â€“ utvecklare kan experimentera utan att riskera att pÃ¥verka den stabila versionen.

ğŸ”¹ **VarfÃ¶r Ã¤r container images viktiga?**

- **Enklare versionshantering** â€“ Lisa kan snabbt vÃ¤xla mellan olika versioner av appen utan att installera om nÃ¥got.
- **Reproducerbara miljÃ¶er** â€“ Vid testning testar teamet exakt samma version som kommer att rullas ut i produktion.
- **Snabb Ã¥terstÃ¤llning vid fel** â€“ om en ny version skapar problem kan teamet enkelt rulla tillbaka till en tidigare fungerande image.
- **Delning och samarbete** â€“ utvecklare kan skapa en image, dela den med teamet och vara sÃ¤kra pÃ¥ att alla jobbar i samma miljÃ¶.

<ZoomableImage
    src="/intro-to-docker-pic2.svg"
    alt="Docker image"
    caption="Vi skapar en image och lÃ¤gger den i lÃ¥dan fÃ¶r att specifiera innehÃ¥llet"
/>

## Docker Registry: Dela och hantera dina containers

NÃ¤r vi har byggt en container image vill vi kunna dela den med resten av teamet eller distribuera den till servrar. Det gÃ¶r vi via en **Docker Registry**, som fungerar som ett gemensamt bibliotek dÃ¤r teamet lagrar och hÃ¤mtar images.

Nu nÃ¤r personerna i teamet sitter och utvecklar olika delar av applikationen Ã¤r det viktigt att alla snabbt och enkelt kan dela sina Ã¤ndringar

- **Maria har uppdaterat API:et med nya funktioner** som gÃ¶r det mÃ¶jligt att filtrera produkter.
- **Johan har optimerat databasen** fÃ¶r att snabba upp laddningstider.
- **Rufus och Kurt behÃ¶ver testa bÃ¥da Ã¤ndringarna tillsammans(API:t och databasen)** innan Ã¤ndringarna gÃ¥r vidare till produktion-versionen.

**Utan ett registry:** Alla skulle behÃ¶va bygga och hantera sina egna versioner av applikationen manuellt, vilket kan leda till fÃ¶rvirring och kompatibilitetsproblem.

**Med ett registry:** Teamet kan enkelt ladda upp, versionera och dela sina containers.

ğŸ”¹Â **Ett typiskt arbetsflÃ¶de med registry:**

1. Lisa utvecklar en ny sÃ¶kfunktion lokalt och testar funktionen i sin utvecklingscontainer.
2. NÃ¤r allt fungerar bygger hon **en ny image**: `docker build -t searchapi:v2` och laddar upp den till teamets registry.
3. Hela teamet **har nu tillgÃ¥ng** och kan nu testa den nya sÃ¶kfunktionen och sedan verifiera den innan Ã¤ndringarna gÃ¥r live.

Detta fÃ¶renklar sÃ¤rskilt:
- **Kodgranskning** (andra kan enkelt testa Ã¤ndringarna)
- **Versionshantering** (alla versioner finns sparade)
- **Utrullning** (samma image anvÃ¤nds i alla miljÃ¶er)

<ZoomableImage
    src="/8.png"
    alt="Docker Registry"
    caption="Vi fÃ¶rvarar vÃ¥ra images i ett Registry sÃ¥ andra behÃ¶riga lÃ¤tt kan komma Ã¥t de"
/>

## Docker Compose: Alla pusselbitar pÃ¥ plats

MÃ¥nga moderna applikationer bestÃ¥r av flera tjÃ¤nster som behÃ¶ver samverka â€“ en backend, en frontend och en databas. Att manuellt starta och koppla ihop alla dessa containers kan vara krÃ¥ngligt, och hÃ¤r kommer **Docker Compose** till anvÃ¤ndning.

NÃ¤r Lisa skall starta applikationen teamet jobbar med (e-handelssystem) sÃ¥ mÃ¤rker hon att systemet bestÃ¥r av flera delar:

- **En webbserver fÃ¶r frontend**, dÃ¤r kunder kan blÃ¤ddra bland produkter och lÃ¤gga bestÃ¤llningar.
- **Ett backend API**, som hanterar orderprocesser och affÃ¤rslogik.
- **En SQL-databas**, som lagrar produktinformation och kundorder.

Lisa fÃ¶rsÃ¶ker starta systemet manuellt, men stÃ¶ter pÃ¥ flera problem:

âŒ **Hon mÃ¥ste starta varje del separat och i rÃ¤tt ordning.**

âŒ **Backend fÃ¶rsÃ¶ker starta innan databasen Ã¤r redo, vilket leder till fel.**

âŒ **Varje tjÃ¤nst behÃ¶ver rÃ¤tt konfiguration fÃ¶r att hitta varandra.**

âŒ **Hon behÃ¶ver hÃ¥lla reda pÃ¥ flera terminalfÃ¶nster fÃ¶r att kÃ¶ra allt samtidigt.**

Teamet visar Lisa en **Docker Compose-fil**, som beskriver hela applikationen och hur de olika tjÃ¤nsterna ska samverka. Med ett enda kommando ( *docker-compose up* ) kan hon starta allt:


âœ”ï¸Â **Alla containers startar automatiskt i rÃ¤tt ordning.**

âœ”ï¸Â **Backend vÃ¤ntar tills databasen Ã¤r redo innan den startar.**

âœ”ï¸Â **TjÃ¤nsterna Ã¤r redan konfigurerade att prata med varandra.**

âœ”ï¸Â **Lisa kan fokusera pÃ¥ kod istÃ¤llet fÃ¶r att hantera miljÃ¶problem.**

<ZoomableImage
    src="/6.png"
    alt="Docker Compose"
    caption="Vi anvÃ¤nder Docker compose fÃ¶r att med ett kommando fÃ¥ alla containers att samverka"
/>


ğŸ”¹ **Docker Compose binder ihop allt:**

Vi definierar hela vÃ¥r miljÃ¶ och hur Docker Compose skall initiera alla delarna i en YAML-fil, den kan se ut sÃ¥hÃ¤r:
```yaml
version: '3.8'
services:
  webshop:
    build: ./frontend
    ports:
      - "3000:3000"
    depends_on:
      - api

  api:
    build: ./backend
    ports:
      - "5000:5000"
    depends_on:
      - db
    environment:
      DATABASE_URL: postgres://user:password@db:5432/shop

  db:
    image: postgres:latest
    environment:
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
      POSTGRES_DB: shop
    volumes:
      - db_data:/var/lib/postgresql/data

volumes:
  db_data:
```

Nu kan hela teamet:

- Starta hela miljÃ¶n med ett kommando: `docker-compose up`
- Vara sÃ¤kra pÃ¥ att alla delar Ã¤r korrekt konfigurerade
- Fokusera pÃ¥ att utveckla nya funktioner istÃ¤llet fÃ¶r att fixa miljÃ¶problem

## Sammanfattning:

En Container Ã¤r som en lÃ¥da med viktiga specifikationer av program och instÃ¤llningar. LÃ¥dan kan vi enkelt skicka runt eller dela inom teamet sÃ¥ att alla sitter pÃ¥ likadana program och instÃ¤llningar.

Container Image Ã¤r som ett recept som specifierar exakt vad som finns i lÃ¥dan och skall initieras nÃ¤r lÃ¥dan bÃ¶rjar kÃ¶ras.

Docker Registry Ã¤r som ett lager dÃ¤r vi gemensamt fÃ¶rvarar och hÃ¤mtar vÃ¥ra lÃ¥dor. LÃ¥dorna hÃ¥lls uppdaterade sÃ¥ att att alla fÃ¥r tillgÃ¥ng till samma miljÃ¶.

Docker Compose hjÃ¤lper oss Ã¶ppna och kÃ¶ra alla containers samtidigt sÃ¥ att de tillsammans fÃ¥r hela applikationen att fungera.