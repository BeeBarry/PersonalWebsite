---
title: 'Introduktion till Docker'
description: 'L√§r dig grunderna i Docker och containers'
category: 'docker'
image:
    url: '/docker-intro.svg'
    alt: 'Docker Introduction'
order: 1
date: '2025-02-03'
tags: ['Beginner', 'Overview']
---

## Containers

En **container** √§r som en liten l√•da som inneh√•ller allt din applikation beh√∂ver f√∂r att fungera: programkod, bibliotek och konfigurationer. Grundtanken med containers √§r att s√§kerst√§lla att **applikationen fungerar p√• exakt samma s√§tt oavsett var den k√∂rs**‚Äîp√• din laptop, en kollegas dator eller i molnet.

N√§r Lisa, en ny utvecklare, b√∂rjar i teamet f√∂rv√§ntar hon sig att det kommer ta **flera timmar, kanske en hel dag**, att installera alla verktyg och konfigurera sin utvecklingsmilj√∂. Men det kanske finns en b√§ttre l√∂sning?

*"Det finns ett smidigare s√§tt,"* s√§ger en kollega och visar hur teamet anv√§nder containers.

**Eftersom allt √§r paketerat i en container**, beh√∂ver Lisa bara k√∂ra ett enda kommando f√∂r att f√• exakt samma utvecklingsmilj√∂ som sina teammedlemmar.

üìç **Vad l√∂ser containers?**

- **Alla utvecklare i teamet arbetar i en identisk milj√∂,** vilket minskar " det funkar ju inte p√• min dator"-problem.
- Nya utvecklare kan starta upp sin milj√∂ **p√• n√•gra minuter ist√§llet f√∂r timmar.**
- Alla anv√§nder **exakt samma versioner** av  tex. C#, Node, databaser och andra beroenden.
- **Lisas utvecklingsmilj√∂ p√•verkar inte andra projekt p√• hennes dator** ‚Äì hon kan arbeta med flera projekt utan att beh√∂va installera om eller √§ndra inst√§llningar varje g√•ng.


<ZoomableImage
    src="/intro-to-docker-pic1.svg"
    alt="Docker Container"
    caption="En container √§r en l√•da som h√•ller koll p√• inneh√•llet"
/>

## Container Images

Om containers √§r l√•dorna, s√• √§r **container images** ritningen √∂ver vad som ska finnas i l√•dan. En image specificerar alla filer, inst√§llningar och program som ska ing√• n√§r containern startas.

Med container images kan teamet hantera olika versioner av sin applikation:

**En stabil version f√∂r produktion** ‚Äì s√§kerst√§ller att kunderna alltid anv√§nder en testad och fungerande version.

**En testversion f√∂r kvalitetss√§kring** ‚Äì teamet kan k√∂ra tester och uppt√§cka buggar innan koden n√•r produktionen.

**En utvecklingsversion med de senaste funktionerna** ‚Äì utvecklare kan experimentera utan att riskera att p√•verka den stabila versionen.

üìç **Varf√∂r √§r container images viktiga?**

- **Enklare versionshantering** ‚Äì Lisa kan snabbt v√§xla mellan olika versioner av appen utan att installera om n√•got.
- **Reproducerbara milj√∂er** ‚Äì Vid testning testar teamet exakt samma version som kommer att rullas ut i produktion.
- **Snabb √•terst√§llning vid fel** ‚Äì om en ny version skapar problem kan teamet enkelt rulla tillbaka till en tidigare fungerande image.
- **Delning och samarbete** ‚Äì utvecklare kan skapa en image, dela den med teamet och vara s√§kra p√• att alla jobbar i samma milj√∂.

<ZoomableImage
    src="/intro-to-docker-pic2.svg"
    alt="Docker image"
    caption="Vi skapar en image och l√§gger den i l√•dan f√∂r att specifiera inneh√•llet"
/>

## Docker Registry

N√§r vi har byggt en container image vill vi kunna dela den med resten av teamet eller distribuera den till servrar. Det g√∂r vi via en **Docker Registry**, som fungerar som ett gemensamt bibliotek d√§r teamet lagrar och h√§mtar images.

Nu n√§r personerna i teamet sitter och utvecklar olika delar av applikationen √§r det viktigt att alla snabbt och enkelt kan dela sina √§ndringar

- **Maria har uppdaterat API:et med nya funktioner** som g√∂r det m√∂jligt att filtrera produkter.
- **Johan har optimerat databasen** f√∂r att snabba upp laddningstider.
- **Rufus och Kurt beh√∂ver testa b√•da √§ndringarna tillsammans(API:t och databasen)** innan √§ndringarna g√•r vidare till produktion-versionen.

**Utan ett registry:** Skulle beh√∂va bygga och hantera sina egna versioner av applikationen manuellt, vilket kan leda till f√∂rvirring och kompatibilitetsproblem.

**Med ett registry:** Teamet kan enkelt ladda upp, versionera och dela sina containers.

üìç¬†**Ett typiskt arbetsfl√∂de med registry:**

1. Lisa utvecklar en ny s√∂kfunktion lokalt och testar funktionen i sin utvecklingscontainer.
2. N√§r allt fungerar bygger hon **en ny image**: `docker build -t searchapi:v2` och laddar upp den till teamets registry.
3. Hela teamet **har nu tillg√•ng** och kan nu testa den nya s√∂kfunktionen och sedan verifiera den innan √§ndringarna g√•r live.

Detta f√∂renklar s√§rskilt:
- **Kodgranskning** (andra kan enkelt testa √§ndringarna)
- **Versionshantering** (alla versioner finns sparade)
- **Utrullning** (samma image anv√§nds i alla milj√∂er)

<ZoomableImage
    src="/8.png"
    alt="Docker Registry"
    caption="Vi f√∂rvarar v√•ra images i ett Registry s√• andra beh√∂riga l√§tt kan komma √•t de"
/>

## Docker Compose

M√•nga moderna applikationer best√•r av flera tj√§nster som beh√∂ver samverka ‚Äì en backend, en frontend och en databas. Att manuellt starta och koppla ihop alla dessa containers kan vara kr√•ngligt, och h√§r kommer **Docker Compose** till anv√§ndning.

N√§r Lisa skall starta applikationen teamet jobbar med (e-handelssystem) s√• m√§rker hon att systemet best√•r av flera delar:

- **En webbserver f√∂r frontend**, d√§r kunder kan bl√§ddra bland produkter och l√§gga best√§llningar.
- **Ett backend API**, som hanterar orderprocesser och aff√§rslogik.
- **En SQL-databas**, som lagrar produktinformation och kundorder.

Lisa f√∂rs√∂ker starta systemet manuellt, men st√∂ter p√• flera problem:

‚ùå Hon m√•ste starta varje del **separat och i r√§tt ordning.**

‚ùå Backend f√∂rs√∂ker starta **innan databasen √§r redo,** vilket leder till fel.

‚ùå Varje tj√§nst beh√∂ver r√§tt konfiguration **f√∂r att hitta varandra.**

‚ùå Hon beh√∂ver h√•lla reda p√• flera terminalf√∂nster f√∂r att **k√∂ra allt samtidigt.**

Teamet visar Lisa en **Docker Compose-fil**, som beskriver hela applikationen och hur de olika tj√§nsterna ska samverka. Med ett enda kommando ( *docker-compose up* ) kan hon starta allt:


‚úÖ Alla containers startar **automatiskt i r√§tt ordning.**

‚úÖ Backend v√§ntar tills **databasen √§r redo** innan den startar.

‚úÖ Tj√§nsterna √§r redan **konfigurerade att prata med varandra.**

‚úÖ Lisa kan **fokusera p√• att skriva kod** ist√§llet f√∂r att hantera milj√∂problem.

<ZoomableImage
    src="/6.png"
    alt="Docker Compose"
    caption="Vi anv√§nder Docker compose f√∂r att med ett kommando f√• alla containers att samverka"
/>


üìç **Docker Compose binder ihop allt:**

Vi definierar hela v√•r milj√∂ och hur Docker Compose skall initiera alla delarna i en **YAML-fil**, den kan se ut s√•h√§r:
```yaml
version: '3.8'
services:
  webshop:
    build: ./frontend
    ports:
      - "3000:3000"
    depends_on:
      - api

  api:
    build: ./backend
    ports:
      - "5000:5000"
    depends_on:
      - db
    environment:
      DATABASE_URL: postgres://user:password@db:5432/shop

  db:
    image: postgres:latest
    environment:
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
      POSTGRES_DB: shop
    volumes:
      - db_data:/var/lib/postgresql/data

volumes:
  db_data:
```

Nu kan hela teamet:

- Starta hela milj√∂n med ett kommando: `docker-compose up`
- Vara s√§kra p√• att alla delar √§r korrekt konfigurerade


## Sammanfattning:

En Container √§r som en l√•da med viktiga specifikationer av program och inst√§llningar. L√•dan kan vi enkelt skicka runt eller dela inom teamet s√• att alla sitter p√• likadana program och inst√§llningar.

Container Image √§r som ett recept som specifierar exakt vad som finns i l√•dan och skall initieras n√§r l√•dan b√∂rjar k√∂ras.

Docker Registry √§r som ett lager d√§r vi gemensamt f√∂rvarar och h√§mtar v√•ra l√•dor. L√•dorna h√•lls uppdaterade s√• att att alla f√•r tillg√•ng till samma milj√∂.

Docker Compose hj√§lper oss √∂ppna och k√∂ra alla containers samtidigt s√• att de tillsammans f√•r hela applikationen att fungera.